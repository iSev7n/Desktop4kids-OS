/* ----------------------------------------------------------
   Explorer Styles
   ----------------------------------------------------------
   Sections:
   1) Design tokens & base
   2) App shell layout
   3) Sidebar
   4) Toolbar (nav/actions, address, search)
   5) Content wrapper
   6) Grid view (tiles)
   7) Details (list) view
   8) Custom scrollbars
   9) Context menu
   10) Dialogs
   11) Utilities
---------------------------------------------------------- */

/* 1) Design tokens & base
   ------------------------------------ */
:root{
  --bg:#0f1115;
  --panel:#131926;
  --line:#273041;
  --text:#e8e8e8;
  --muted:#a6b0c0;
  --accent:#79a8ff;
  --danger:#de4040;
  --tile:#111a28;

  --radius-sm:6px;
  --radius-md:10px;
  --radius-lg:12px;
  --ease:120ms ease;
}

*{ box-sizing:border-box; }

html, body{
  height:100%;
  margin:0;
  background:transparent;
  color:var(--text);
  font-family:system-ui, Segoe UI, sans-serif;
  overflow:hidden;  /* all scrolling is internal */
}

/* 2) App shell layout
   ------------------------------------ */
.frame{
  display:grid;
  grid-template-columns:180px 1fr;
  height:100%;
  overflow:hidden;
}
.main{
  display:grid;
  grid-template-rows:auto 1fr;
  height:100%;
  overflow:hidden;
}

/* 3) Sidebar
   ------------------------------------ */
.side{
  background:#0b1019;
  border-right:1px solid var(--line);
  padding:12px;
  display:flex; flex-direction:column; gap:10px;
}
.sitem{
  display:flex; align-items:center; gap:10px;
  border:0; background:#141a27; color:#fff;
  border-radius:12px; padding:10px 12px; cursor:pointer;
}
.sitem:hover{ background:#1b2436; }
.sitem img{ width:18px; height:18px; display:block; }

/* 4) Toolbar (nav/actions, address, search)
   ------------------------------------ */
.toolbar{
  display:grid;
  grid-template-columns:auto 1fr auto;
  align-items:center; gap:10px;
  background:#0b1019; border-bottom:1px solid var(--line);
  padding:8px 10px; overflow:hidden;
}
.tb{
  height:28px; min-width:34px;
  border:1px solid var(--line); background:#1a2232; color:#fff;
  border-radius:7px; padding:0 8px; cursor:pointer;
}
.nav{ display:flex; gap:8px; }
.actions{ display:flex; gap:8px; }

.center{
  display:grid; grid-template-columns:minmax(0,1fr) auto; /* address grows */
  align-items:center; gap:10px; min-width:0;
}
.addrbox{
  height:30px; width:100%; min-width:0;
  border:1px solid var(--line); background:#101829; color:#e8e8e8;
  border-radius:8px; padding:0 10px; font-family:Consolas, ui-monospace, monospace;
}
.searchWrap{ display:flex; align-items:center; gap:8px; }
.search{
  height:30px; width:220px;
  border:1px solid var(--line); background:#121828; color:#fff;
  border-radius:999px; padding:0 12px;
}

/* 5) Content wrapper
   ------------------------------------ */
.content{
  position:relative; height:100%;
  display:grid; grid-template-rows:1fr; overflow:hidden;
}

/* 6) Grid view (tiles)
   ------------------------------------ */
.grid{
  height:100%; overflow-y:auto; overflow-x:hidden;
  padding:16px;

  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(150px, 1fr));
  grid-auto-rows:140px;
  gap:14px;
}
.gitem{
  height:100%;
  padding:12px 10px;
  border-radius:14px;
  background:transparent; border:1px solid transparent;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  cursor:default; transition:background .12s, border-color .12s, filter .12s;
  position:relative;  /* for pseudo outline */
}
.gitem:hover{ background:var(--tile); border-color:var(--line); }
.gitem.sel{ background:rgba(17,26,40,.9); border-color:#3a4b67; }

.gitem img{ width:36px; height:36px; display:block; }
.gname{
  margin-top:8px; font-size:12px; text-align:center; line-height:1.2;
  max-width:100%; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}

/* Rounded dashed outline for dragging/selection (match desktop) */
.gitem.dragging::after{
  content:"";
  position:absolute; inset:-4px;
  border:2px dashed rgba(255,255,255,.6);
  border-radius:18px;
  pointer-events:none;
}

/* 7) Details (list) view
   ------------------------------------ */
.list{
  height:100%; overflow-y:auto; overflow-x:hidden;
}
.hdr{
  position:sticky; top:0;
  background:#0f1522; border-bottom:1px solid var(--line);
}
.row{
  display:grid;
  grid-template-columns:1.6fr .6fr .5fr .9fr; /* Name | Type | Size | Date */
  gap:10px; align-items:center;
  padding:10px 12px; border-bottom:1px solid #121a2a;
  transition:background .12s; position:relative;
}
.row:hover{ background:#151e30; }
.row.sel{ background:#1a2740; }
.c.name{ display:flex; align-items:center; gap:12px; }
.icon{ width:22px; height:22px; display:inline-grid; place-items:center; }
.icon img{ width:22px; height:22px; display:block; }
.hdr .c{ color:var(--muted); font-size:12px; padding:8px 12px; }

/* 8) Custom scrollbars
   ------------------------------------ */
.grid, .list{
  scrollbar-width:thin; scrollbar-color:#1f2a3e #0a0f17;
}
.grid::-webkit-scrollbar, .list::-webkit-scrollbar{ width:8px; height:8px; }
.grid::-webkit-scrollbar-track, .list::-webkit-scrollbar-track{
  background:#0a0f17; border-radius:8px;
}
.grid::-webkit-scrollbar-thumb, .list::-webkit-scrollbar-thumb{
  background:#1f2a3e; border:2px solid #0a0f17; border-radius:8px;
}
.grid::-webkit-scrollbar-thumb:hover, .list::-webkit-scrollbar-thumb:hover{
  background:#2a3a56;
}

/* 9) Context menu
   ------------------------------------ */
.ctx{
  position:fixed; min-width:190px;
  background:#0f1522; border:1px solid var(--line); border-radius:var(--radius-md);
  box-shadow:0 18px 50px rgba(0,0,0,.45);
  padding:6px; z-index:999999;
}
.ctx .mi{
  display:flex; align-items:center; gap:8px;
  padding:8px 10px; border-radius:var(--radius-md);
  cursor:pointer; color:#e8e8e8;
}
.ctx .mi:hover{ background:#1a2232; }
.ctx .mi.danger:hover{ background:#7a2a2a; }
.ctx .sep{ height:1px; background:#213047; margin:6px 4px; }

/* 10) Dialogs
   ------------------------------------ */
.dlg-wrap{
  position:fixed; inset:0; background:rgba(0,0,0,.45);
  display:flex; align-items:center; justify-content:center; z-index:999999;
}
.dlg{
  width:320px; background:#0f1623; border:1px solid #2a3242;
  border-radius:var(--radius-lg); box-shadow:0 20px 50px rgba(0,0,0,.5); padding:16px;
}
.dlg-title{ font-weight:600; margin-bottom:10px; color:#cfd6e6; }
.dlg-input{
  width:100%; padding:10px; border:1px solid #2a3242; border-radius:8px;
  background:#0b101a; color:#e8e8e8;
}
.dlg-actions{ display:flex; gap:8px; justify-content:flex-end; margin-top:12px; }
.dlg-actions button{
  padding:8px 12px; border-radius:8px; border:1px solid #2a3242;
  background:#121826; color:#e8e8e8; cursor:pointer;
}
.dlg-actions button:hover{ background:#1a2232; }

/* 11) Utilities
   ------------------------------------ */
.hide{ display:none !important; }
:focus{ outline:none; }
input:focus, button:focus, textarea:focus, select:focus{
  box-shadow:0 0 0 2px var(--accent); border-color:var(--accent);
}

/* Keep reordering/drag visuals snappy when absolute positioning is used in other views */
.d-icon, .gitem{ transition:left var(--ease), top var(--ease); }

/* Ensure the top-level #ctx (if used) sits under dialogs but above content */
#ctx{ position:fixed; z-index:999998; }
